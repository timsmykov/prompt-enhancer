## Спецификация проекта

### 1. Назначение
Проект — браузерное расширение для улучшения выделенных текстовых промптов через LLM. Пользователь выделяет текст на странице, запускает улучшение из контекстного меню, получает переработанный вариант и может заменить исходный текст или скопировать результат.

### 2. Для кого
- Специалисты по контенту, маркетологи, аналитики и продакт‑менеджеры.
- Пользователи, которые регулярно пишут промпты для LLM и хотят быстро улучшать их качество.
- Люди, работающие в браузере и нуждающиеся в быстрых правках выделенного текста.

### 3. MVP‑сценарии
- Выделить текст → вызвать улучшение из контекстного меню → увидеть результат → Replace/Copy.
- Настроить API‑ключ, модель, системный промпт и скорость печати в options.

### 4. Стек и инструменты
- Frontend: Vue 3 (runtime build), Composition API, чистый JavaScript (ES6+), CSS.
- Extension: Chrome Manifest V3, background service worker, content script, options UI, overlay UI (iframe).
- Хранение настроек: `chrome.storage.local`.
- LLM‑провайдер (MVP): один провайдер (например, OpenRouter), прямые HTTPS‑запросы из background.
- Backend: отсутствует на MVP (опционален для будущего прокси).

### 5. Основные компоненты
- `background.js`: получает запрос на улучшение, делает API‑вызов, возвращает результат.
- `content.js`: открывает оверлей, управляет заменой выделенного текста.
- `overlay` UI: показывает прогресс/результат, печатает текст с эффектом, кнопки Replace/Copy/Regenerate.
- `options` UI: ввод API‑ключа, модели, системного промпта и скорости печати.

### 6. Пользовательский поток
1) Пользователь выделяет текст.
2) Выбирает действие «Improve prompt» из контекстного меню.
3) Открывается оверлей и начинается запрос.
4) Пользователь получает улучшенный текст и выбирает действие.

### 7. Ограничения и допущения
- MVP использует только одного провайдера.
- API‑ключ хранится локально в `chrome.storage.local`.
- Нет синхронизации между устройствами и нет бэкенда.
- Максимальная длина входного текста в MVP: 4000 символов.

### 8. Нефункциональные требования
- Быстрое открытие оверлея (без заметных задержек на инъекцию).
- Понятные ошибки при отсутствии ключа, пустом выделении и сбоях API.
- Минимальные зависимости и чистая структура кода.
- Управляемая скорость печати результата (0 = мгновенно).

### 9. Будущие улучшения (после MVP)
- Поддержка нескольких провайдеров и моделей.
- Опциональный backend‑прокси для защиты ключей и централизованной логики.
- История улучшений и шаблоны промптов.
- Расширенные настройки скорости и формата ответа.
